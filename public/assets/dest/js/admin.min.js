"use strict";var toastContainer=document.getElementById("toastContainer"),toastCounter=0;function show(e,t,s){var n="toastMsg"+toastCounter++,r=document.createElement("div");r.id=n,r.classList.add("toast","align-items-center","text-"+s,"bg-"+t,"border-0");var o=document.createElement("div");o.classList.add("d-flex");var d=document.createElement("div");d.classList.add("toast-body"),d.innerHTML=e;var a=document.createElement("button");a.classList.add("btn-close","btn-close-"+s,"me-2","m-auto"),a.setAttribute("data-bs-dismiss","toast"),o.appendChild(d),o.appendChild(a),r.appendChild(o),toastContainer.appendChild(r),new bootstrap.Toast(r).show()}function showSuccess(e){show(e,"dark","white")}function showError(e){show(e,"light","black")}var urlsTable=document.getElementById("urls"),usersTable=document.getElementById("users");function loadUrlsTable(){fetch("/admin/api/url",{method:"GET"}).then(function(e){return e.json()}).then(function(e){"success"===e.status&&e.shortUrls.forEach(function(e){urlsTable.innerHTML+='<tr><th scope="row">'+e.id+"</th><td>"+e.shortId+"</td><td>"+e.target+"</td><td>"+e.client+"</td><td>"+e.displayName+"</td></tr>"})})}function loadUsersTable(){fetch("/admin/api/user",{method:"GET"}).then(function(e){return e.json()}).then(function(e){"success"===e.status&&e.users.forEach(function(e){usersTable.innerHTML+='<tr><th scope="row">'+e.id+"</th><td>"+e.upin+"</td><td>"+e.displayName+"</td></tr>"})})}loadUrlsTable(),loadUsersTable();var delUrlForm=document.getElementById("delUrlForm"),cleanupForm=document.getElementById("cleanupForm"),delShortId=document.getElementById("delShortId"),createUserForm=document.getElementById("createUserForm"),createUserPIN=document.getElementById("createUserPIN"),createUserDisplayName=document.getElementById("createUserDisplayName"),delUserForm=document.getElementById("delUserForm"),delUserId=document.getElementById("delUserId");delUrlForm.onsubmit=function(e){e.preventDefault();var t=delShortId.value;fetch("/admin/api/url/"+t,{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){"success"!==e.status?showError("URL couldn't be deleted!"):showSuccess("URL successfully deleted!")})},cleanupForm.onsubmit=function(e){e.preventDefault(),fetch("/admin/api/urlCleanup",{method:"POST"}).then(function(e){return e.json()}).then(function(e){"success"!==e.status?showError("URL's couldn't be cleaned up!"):showSuccess("URL's successfully cleaned up!")})},createUserForm.onsubmit=function(e){e.preventDefault();var t=createUserPIN.value,s=createUserDisplayName.value,n=new FormData;n.append("uniquePin",t),n.append("displayName",s),fetch("/admin/api/user",{method:"POST",body:n}).then(function(e){return e.json()}).then(function(e){"success"!==e.status?showError("User couldn't be created!"):showSuccess("User successfully created!")})},delUserForm.onsubmit=function(e){e.preventDefault();var t=delUserId.value;fetch("/admin/api/user/"+t,{method:"DELETE"}).then(function(e){return e.json()}).then(function(e){"success"!==e.status?showError("User couldn't be deleted!"):showSuccess("User successfully deleted!")})};